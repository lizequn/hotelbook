<?xml version="1.0" encoding="UTF-8"?>

<div>
    <h1>AAA</h1>


    <!-- Standard HTML form, with the submit function bound to the register() function defined in the the controller -->
    <form id="reg" ng-submit="register()">
        <h2>flight Registration</h2>
        <fieldset>
            <legend>Register a flight:</legend>
            <!-- Each input is bound to a property on the prototype newMember object -->
            <div>
                <label for="name">FlightNo:</label>
                <input type="text" name="name" id="name" ng-model="newFlight.flight_no" placeholder="FlightNo" required
                       autofocus/>
                <span class="error" ng-show="errors.flight_no">{{errors.flight_no}}</span>
            </div>
            <div>
                <label for="MaxSize">FlightSize:</label>
                <input type="number" name="MaxSize" id="MaxSize" ng-model="newFlight.flight_size" placeholder="Size"
                       required/>
                <span class="error" ng-show="errors.flight_size">{{errors.flight_size}}</span>
            </div>
            <div>
                <label for="CurrentNum">Password:</label>
                <input type="number" name="CurrentNum" id="CurrentNum" ng-model="newFlight.current_num"
                       placeholder="Current Size" required/>
                <span class="error" ng-show="errors.current_num">{{errors.current_num}}</span>
            </div>
            <div>
                <label for="departure">departure date:</label>
                <input type="date" name="departure" id="departure" ng-model="newFlight.date" placeholder="departure date" required/>
                <span class="error" ng-show="errors.date">{{errors.date}}</span>
            </div>
            <div>
                <label for="time">departure time:</label>
                <input type="time" name="time" id="time" ng-model="newFlight.time" placeholder="departure time" required/>
                <span class="error" ng-show="errors.time">{{errors.time}}</span>
            </div>
            <div>
                <label for="company">company:</label>
                <input type="text" name="company" id="company" ng-model="newFlight.company" placeholder="company" required/>
                <span class="error" ng-show="errors.company">{{errors.company}}</span>
            </div>
            <div>
                <label for="flight_type">Flight Type:</label>
                <input type="text" name="flight_type" id="flight_type" ng-model="newFlight.flight_type" placeholder="flight type" required/>
                <span class="error" ng-show="errors.flight_type">{{errors.flight_type}}</span>
            </div>

            <!-- We output a list of success messages (appropriately styled!) for the form. -->
            <ul ng-hide="!successMessages" class="success">
                <li ng-repeat="message in successMessages">{{message}}</li>
            </ul>

            <!-- Output the list of error messages if any. -->
            <ul ng-hide="!errorMessages" class="error">
                <li ng-repeat="message in errorMessages">{{message}}</li>
            </ul>

            <!-- There are two buttons, the default submit action (which is bound for the whole form), and a reset button, that clears the form. -->
            <div>
                <input type="submit" id="register" value="Register"/>
                <input type="button" ng-click="reset()" name="cancel"
                       id="cancel" value="Cancel"/>
            </div>
        </fieldset>
    </form>

    <!-- A list of registered members -->
    <h2>Members</h2>
    <!-- If there are no members registered, instead of showing the table, we show a simple message. -->
    <em ng-show="flights.length == 0">No registered members.</em>
    <table ng-hide="flights.length == 0" class="simpletablestyle">
        <thead>
        <tr>

            <th>Flight No.</th>
            <th>Max num</th>
            <th>Current num</th>
            <th>departure date</th>
            <th>Company</th>
            <th>Flight type</th>
        </tr>
        </thead>
        <!-- The table is built using the AngularJS repeat function, iterating over the members variable, and ordering by the property specified in the orderBy variable -->
        <tr ng-repeat="flight in flights | orderBy:orderBy">

            <td>{{flight.flight_no}}</td>
            <td>{{flight.flight_size}}</td>
            <td>{{flight.current_num}}</td>
            <td>{{flight.date}}--{{flight.time}}</td>
            <td>{{flight.company}}</td>
            <td>{{flight.flight_type}}</td>

    </table>
    <div>
        REST URL for all members: <a href="rest/members">/rest/members</a>
    </div>
    <div>
        <!-- The table has a button to manually refresh the values, in case, for example, someone else adds a member -->
        <input type="button" ng-click="refresh()" name="refresh"
               id="refresh" value="Refresh"/>
    </div>
</div>
